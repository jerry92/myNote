### 为什么要使用mongo

1. 易于使用，相比关系型数据库非常灵活
2. 功能丰富，支持按字段，范围和正则查询（索引、聚合、特殊类型的集合）
3. 高可用，本身支持高可用，通过复制集
4. 易扩展，支持水平扩展
5. 高性能

### mongo的缺点

1. MongoDB并不具备一些在关系型数据库中很普遍的功能，如连接（join）和复杂的多行事务（multirow transaction）

### mongo数据建模时注意一下几点

1. 应用程序的需求是什么–查看应用程序的业务需求，并查看应用程序所需的数据和数据类型。基于此，确保相应地确定文档的结构。
2. 如果我们可能使用大量查询操作，则可以考虑在数据模型中使用索引来提高查询效率。
3. 数据库中是否频繁发生插入，更新和删除操作–如果数据建模设计需要重新考虑使用索引或合并分片，以提高整体MongoDB环境的效率。


### mongo shell
1. mongo shell采用的是javascript，可以写js脚本交给mongo shell执行
2. .mongorc.js文件中。这个文件会在启动shell时自动运行，可以在这个文件中重写一些比较危险的操作函数，可以防止自己的误操作


### 插入

插入单个文档
> db.foo.insert({"key": "value"})

批量插入多个文档（最大消息48M）
> db.foo.batchInsert([{}, {}])
当插入过程有一条失败，前面的文档会插入成功，后面的插入失败，可以使用continueOnError选项

注意倒入数据时不用批量插入，可以使用mongoimport工具

### 删除

> db.foo.remove({"key": "查询条件"})
> db.foo.drop()  // 清空集合，速度更快

### 更新

> db.foo.update({}, {})   // 第一个参数为查询参数，第二个为更新的集合内容，需要注意需要保证查询结果唯一，不然更新时会出现主键冲突   
> db.foo.update({}, {"$set": {}})     // 可以使用修改器设置、删除某个字段，修改器包括：$unset，$set, $inc(蒸熟或浮点类型), $push（数组）, $each（数组）, $sort（数组）

修改器还有很多需单独了解